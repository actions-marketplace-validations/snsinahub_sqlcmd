name: 'action yml'
description: 'dotnet restore'
inputs:
  sql_path:  
    description: 'sql_path'
    required: false
  server_name:  
    description: 'Server Name or IP address'
    required: true
  db_name:  
    description: 'db name'
    required: true  
  sqlcmd_variables:  
    description: 'file_extenstion'
    required: false
    default: '*.sln'
  sqlcmd_action:  
    description: 'sqlcmd_action'
    required: true
outputs:
  random-number:
    description: "Random number"
    value: ${{ steps.random-number-generator.outputs.random-number }}
runs:
  using: "composite"
  steps:
    - run: |
        
        echo "sqlcmd scripts"
        echo "Invoke-Sqlcmd -ServerInstance ${{ inputs.server_name }} -Database ${{ inputs.db_name }} -InputFile ${{ inputs.sql_path }}"
        # Invoke-Sqlcmd -ServerInstance DESKTOP-B3RJ2NG\SQLENT -Database "${{ inputs.db_name }}" -InputFile "${{ inputs.sql_path }}"
        Invoke-Sqlcmd -ServerInstance DESKTOP-B3RJ2NG\SQLENT -Database SSISDB -InputFile 'C:\Users\Siavash Namvar\source\sql-server-samples\samples\databases\wide-world-importers\wwi-ssdt\wwi-ssdt\PostDeploymentScripts\sample.sql'
      id: sqlcmd-script          
      shell: powershell
      # if: ${{ inputs.sqlcmd_action == 'script' }}
    
    
    


      